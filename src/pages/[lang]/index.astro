---
import Layout from "../../layouts/Layout.astro";
import {
  getLangFromUrl,
  useTranslations,
  LANGUAGES_KEYS,
} from "../../i18n/utils";

import heroImage from "../../assets/images/hero.webp";
import { Image } from "astro:assets";
import PhoneIcon from "../../assets/icons/phone.svg";
import StarIcon from "../../assets/icons/star.svg";
import instagramImage from "../../assets/images/instagram.svg";
import whatsappImage from "../../assets/images/whatsapp.svg";
import { getBlogPosts } from "../../content/config";
import type { BlogPostWithSlug } from "../../content/config";
import type { ImageMetadata } from "astro";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Blog yazılarından faaliyet alanları için görsel ve etiketleri çekeceğiz
const _posts: BlogPostWithSlug[] = await getBlogPosts();
const practiceSlugs = [
  "vehicle-value-loss",
  "family-law",
  "cybercrimes",
  "real-estate-zoning",
  "inheritance-law",
  "foreigners-citizenship",
  "criminal-law",
  "labor-law",
  "enforcement-bankruptcy",
];
type PracticeItem = {
  slug: string;
  title: string;
  description: string;
  heroImage?: ImageMetadata;
  tags: string[];
};

const practiceItems: PracticeItem[] = practiceSlugs.flatMap((slug) => {
  const post = _posts.find((p) => p.blog_slug === slug && (p.data.lang ?? lang) === lang);
  return post
    ? [{
        slug,
        title: post.data.title,
        description: post.data.description,
        heroImage: post.data.heroImage,
        tags: post.data.tags ?? [],
      }]
    : [];
});

export async function getStaticPaths() {
  return LANGUAGES_KEYS.map((lang) => ({ params: { lang } }));
}
---

<Layout title={t['site.title']} description={t['site.description']} lang={lang}>
  {/* Hero Section */}
  <section class="w-full flex flex-col items-center mb-5">
    <div
      class="w-full max-w-[1200px] mx-auto aspect-[1200/365] rounded-3xl overflow-hidden shadow-lg"
    >
      <Image
        src={heroImage}
        alt="Adalet Görseli"
        width={1200}
        height={365}
        widths={[360, 540, 720, 768, 1024, 1200]}
        sizes="(max-width: 640px) calc(100vw - 2rem), (max-width: 1024px) calc(100vw - 2rem), 1200px"
        format="webp"
        quality={70}
        loading="eager"
        fetchpriority="high"
        decoding="async"
        class="w-full h-full object-cover object-center"
      />
    </div>
    <div class="px-4 md:px-8 py-3 flex flex-col items-center">
      <q
        class="text-xl md:text-2xl lg:text-3xl font-semibold text-center italic mb-2"
      >
        {t['home.heroQuote']}
      </q>
    </div>
  </section>
  <h1 class="text-4xl font-bold text-center mb-5">
    {t['footer.f1']} | {t['site.title']}
  </h1>
  <p class="text-center text-muted-foreground">
{t['home.desc']}
  </p>
  {/* İletişim Bölümü */}
  <div
    class="w-full rounded-3xl overflow-hidden shadow-lg mt-3 bg-gradient-to-r from-amber-600/25 via-base-100 to-amber-600/25"
  >
    <div class="flex flex-col items-center gap-4 py-1">
      {/* Telefon Numarası */}
      <a
        href="tel:+905362191550"
        aria-label="Telefon ile arayın: +90 536 219 15 50"
        class="flex items-center gap-3 text-orange-600 font-bold text-2xl md:text-3xl hover:text-orange-700 transition-all duration-300 hover:scale-110 hover:shadow-lg mt-2 animate-bounce"
      >
        <PhoneIcon class="w-7 h-7 md:w-8 md:h-8" />
        +90 536 219 15 50
      </a>

      {/* Sosyal Medya İkonları */}
      <div class="flex items-center gap-10 md:gap-12 mb-2">
        <a
          href="https://wa.me/905362191550?text=Merhaba,%20Avukatlık%20-%20Danışmanlık%20Hizmeti%20almak%20istiyorum."
          target="_blank"
          rel="noopener noreferrer"
          class="transition-transform hover:scale-110"
        >
          <Image src={whatsappImage} alt="whatsapp" width={54} height={54} />
        </a>
        <a
          href="https://www.instagram.com/avukat_yasemin_ucarer/"
          target="_blank"
          rel="noopener noreferrer"
          class="transition-transform hover:scale-110"
        >
          <Image src={instagramImage} alt="instagram" width={48} height={48} />
        </a>
      </div>
    </div>
  </div>

  {/* Faaliyet Alanları Bölümü */}
  <div class="container mx-auto max-w-6xl px-4 py-4">
    <h2 class="text-2xl font-bold mb-4">{t['nav.practiceAreas']}</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        practiceItems.map((item) => (
          <a
            href={`/${lang}/blog/${item.slug}`}
            class="group card bg-base-100 border rounded-box overflow-hidden shadow-sm transition-transform duration-300 hover:-translate-y-1 hover:shadow-lg"
          >
            <figure class="relative">
              {item.heroImage && (
                <Image
                  src={item.heroImage}
                  alt={item.title}
                  height={160}
                  widths={[360, 720]}
                  sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
                  format="webp"
                  quality={75}
                  loading="lazy"
                  decoding="async"
                  class="w-full h-40 object-cover"
                />
              )}
              <div class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"></div>
            </figure>
            <div class="card-body">
              <h3 class="card-title text-lg md:text-xl">{item.title}</h3>
              {item.description && (
                <p class="text-sm text-base-content/70 line-clamp-2">{item.description}</p>
              )}
              {item.tags.length > 0 && (
                <div class="flex flex-wrap gap-2 mt-2">
                  {item.tags.slice(0, 6).map((tag) => (
                    <span class="badge badge-outline">{tag}</span>
                  ))}
                </div>
              )}
              <div class="card-actions justify-center mt-3">
                <span class="btn btn-sm btn-primary">Detay</span>
              </div>
            </div>
          </a>
        ))
      }
    </div>
  </div>

  {/* Google Yorumlar Bölümü */}
  <section class="mt-16">
    <div class="flex flex-col items-center mb-6">
      <h2
        class="text-3xl font-bold text-center flex flex-wrap items-center gap-2"
      >
        <span class="ml-2 flex items-center">
          <span  style={{ color: "#4285F4" }}>G</span>
          <span  style={{ color: "#EA4335" }}>o</span>
          <span  style={{ color: "#FBBC05" }}>o</span>
          <span  style={{ color: "#4285F4" }}>g</span>
          <span  style={{ color: "#34A853" }}>l</span>
          <span  style={{ color: "#EA4335" }}>e</span>
        </span>
        {t['home.reviews1']}
      </h2>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
      {/* Yorum 1 */}
      <div class="bg-card rounded-xl shadow p-6 flex flex-col gap-3">
        <div class="flex items-center gap-2">
          <span class="font-semibold">Ayten Ayhan</span>
          <div class="flex ml-2">
            {
              [...Array(5)].map(() => (
                <StarIcon class="w-5 h-5 text-yellow-400 fill-yellow-400" />
              ))}
          </div>
        </div>
        <p class="text-muted-foreground text-sm">
          {t['home.reviews2'][0]}
        </p>
      </div>

      {/* Yorum 2 */}
      <div class="bg-card rounded-xl shadow p-6 flex flex-col gap-3">
        <div class="flex items-center gap-2">
          <span class="font-semibold">Heval Şekerci</span>
          <div class="flex ml-2">
            {
              [...Array(5)].map(() => (
                <StarIcon class="w-5 h-5 text-yellow-400 fill-yellow-400" />
              ))}
          </div>
        </div>
        <p class="text-muted-foreground text-sm">
          {t['home.reviews2'][1]}
        </p>
      </div>

      {/* Yorum 3 */}
      <div class="bg-card rounded-xl shadow p-6 flex flex-col gap-3">
        <div class="flex items-center gap-2">
          <span class="font-semibold">Demet Özdemir</span>
          <div class="flex ml-2">
            {
              [...Array(5)].map(() => (
                <StarIcon class="w-5 h-5 text-yellow-400 fill-yellow-400" />
              ))}
          </div>
        </div>
        <p class="text-muted-foreground text-sm">
          {t['home.reviews2'][2]}
        </p>
      </div>

      {/* Yorum 4 */}
      <div class="bg-card rounded-xl shadow p-6 flex flex-col gap-3">
        <div class="flex items-center gap-2">
          <span class="font-semibold">Şemsi Nur Ayışık</span>
          <div class="flex ml-2">
            {
              [...Array(5)].map(() => (
                <StarIcon class="w-5 h-5 text-yellow-400 fill-yellow-400" />
              ))}
          </div>
        </div>
        <p class="text-muted-foreground text-sm">
          {t['home.reviews2'][3]}
        </p>
      </div>
    </div>

    <div class="flex justify-center">
      <a
        href="https://www.google.com.tr/search?sa=X&sca_esv=d2336463bd812dcd&hl=tr&tbm=lcl&q=Avukat+Yasemin+U%C3%A7arer+Durgunlu+Yorumlar&rflfq=1&num=20&stick=H4sIAAAAAAAAAONgkxIxNDQ3NDewNDM1NbSwNDc3MTcxsdjAyPiKUcOxrDQ7sUQhMrE4NTczTyH08PLEotQiBZfSovTSvJxShcj8otLcnMSiRaxEKwUASpHenHEAAAA&rldimm=11717096551897747448&ved=2ahUKEwjT4KbU2vONAxXRS_EDHdbbNAgQ9fQKegQIRBAF&biw=1912&bih=928&dpr=1#lkt=LocalPoiReviews"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center justify-center border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 px-6 py-2 rounded-full text-base font-semibold transition-colors duration-300"
      >
        {t['home.viewAllReviews']}
      </a>
    </div>
  </section>
</Layout>
