---
import Palette from '../assets/icons/palette.svg';
const allThemes = ["light", "dark", "cupcake", "bumblebee", "emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter","dim","nord","sunset","caramellatte","abyss","silk"];

// Benzersiz ID olu≈ütur
const uniqueId = `theme-selector-${Math.random().toString(36).substr(2, 9)}`;
const optionsId = `theme-options-${Math.random().toString(36).substr(2, 9)}`;
---

<div class="dropdown dropdown-end theme-selector" id={uniqueId}>
  <div tabindex="0" role="button" class="btn h-auto p-1">
    <Palette width="20" height="20" />
  </div>
  <div
    tabindex="0"
    class="dropdown-content menu bg-base-100 rounded-box z-50 w-40 p-2 shadow-sm max-h-64 overflow-y-auto"
    id={optionsId}
  >
    <ul>
      {
        allThemes.map((theme) => (
          <li>
            <a href="#" data-theme={theme} class="theme-option">{theme}</a>
          </li>
        ))
      }
    </ul>
  </div>
</div>


<!-- üîΩ Tema se√ßimi i√ßin client-side script -->
<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    // T√ºm theme-selector sƒ±nƒ±fƒ±na sahip elementleri bul
    const themeContainers = document.querySelectorAll(".theme-selector");
    
    themeContainers.forEach((themeContainer) => {
      if (!themeContainer) return;
      
      const themeButtons = themeContainer.querySelectorAll(".theme-option");
      themeButtons.forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          const selectedTheme = btn.getAttribute("data-theme")
            ?? document.documentElement.getAttribute("data-theme")
            ?? "light";
          document.documentElement.setAttribute("data-theme", selectedTheme);
          localStorage.setItem("theme", selectedTheme);
        });
      });
    });
  });
</script>

